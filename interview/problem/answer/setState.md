####

setState 设计为异步, 可以显著的提升性能;
如果每次调用 setState 都进行一次更新, 那么意味着 render 函数会被频繁的调用, 界面重新渲染, 这样效率很低;
最好的办法应该是获取到多个更新, 之后进行批量更新, 放入到一个队列里, 进行一个合并, 批量更新;
如果同步更新了 state, 但是还没有执行 render 函数, 那么 state 和 props 不能保持同步;
state 和 props 不能保持一致性, 会在开发中产生很多的问题;

#### 实现

他内部的机制和 Vue 的 $nextTick 和浏览器的 Event-loop 有点类似，多个 setState 执行，就把它塞进一个队列里存储起来，等到这次操作（当前的同步操作）完成，在将在队列中存储的状态（state）做合并，所以无论你执行多少次 setState ，最后只会针对最新的 state 值走一次更新流程，这就是批量操作更新。
